<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Client Database Management</title>
</head>
<body>
    <h1>Client Database Management</h1>

    <!-- Add Client Form -->
    <h2>Add Client</h2>
    <form action="/add_client" method="POST">
        <input type="text" name="name" placeholder="Name" required>
        <input type="text" name="surname" placeholder="Surname" required>
        <input type="email" name="email" placeholder="Email" required>
        <input type="text" name="shipping_address" placeholder="Shipping Address" required>
        <input type="text" name="products" placeholder="Products (comma separated)">
        <button type="submit">Add Client</button>
    </form>

    <!-- Search Clients Form -->
    <h2>Search Clients</h2>
    <form action="/search_clients" method="GET">
        <input type="text" name="name" placeholder="Search by Name">
        <input type="text" name="surname" placeholder="Search by Surname">
        <input type="text" name="product" placeholder="Search by Product">
        <button type="submit">Search</button>
    </form>

    <!-- Display Search Results -->
    <div id="search-results">
        <!-- Search results will be displayed here via JavaScript -->
    </div>

    <script>
        // JavaScript to handle search and display results
        document.querySelector('form[action="/search_clients"]').onsubmit = async function(e) {
            e.preventDefault();
            const form = e.target;
            const name = form.name.value;
            const surname = form.surname.value;
            const product = form.product.value;

            const response = await fetch(`/search_clients?name=${name}&surname=${surname}&product=${product}`);
            const clients = await response.json();

            const resultsDiv = document.getElementById('search-results');
            resultsDiv.innerHTML = clients.length ? `<h3>Results:</h3><ul>` + 
                clients.map(client => `<li>${client.name} ${client.surname} - ${client.email}</li>`).join('') + 
                `</ul>` : `<p>No results found</p>`;
        };
    </script>
</body>
</html>
